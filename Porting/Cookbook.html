
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.0.2">
    
    
      
        <title>Porting Cookbook - ROS on Windows</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.38780c08.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f72e892.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ros-for-windows-porting-cookbook" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="ROS on Windows" class="md-header-nav__button md-logo" aria-label="ROS on Windows">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ROS on Windows
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Porting Cookbook
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ROS on Windows" class="md-nav__button md-logo" aria-label="ROS on Windows">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ROS on Windows
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../WhatsNew.html" class="md-nav__link">
      What's New
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Build/status.html" class="md-nav__link">
      Build Status
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Get ROS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Get ROS" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Get ROS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/Setup.html" class="md-nav__link">
      ROS 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/SetupRos2.html" class="md-nav__link">
      ROS 2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Using ROS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using ROS" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Using ROS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/NewToROS.html" class="md-nav__link">
      For new ROS Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Getting Started with ROS 1
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started with ROS 1" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Getting Started with ROS 1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="http://wiki.ros.org/ROS/Tutorials" class="md-nav__link">
      Tutorials at ROS Wiki 🔗
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Moveit/moveit_tutorials.html" class="md-nav__link">
      MoveIt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Moveit/UR3.html" class="md-nav__link">
      Universal Robot UR3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Turtlebot/Turtlebot3.html" class="md-nav__link">
      TurtleBot3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/sick_s300/getting_started.html" class="md-nav__link">
      SICK S300
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/ethercat/soem.html" class="md-nav__link">
      Simple Open EtherCAT Master
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/peak/peak.html" class="md-nav__link">
      PEAK-System&reg; PCAN&reg;-Basic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Getting Started with ROS 2
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started with ROS 2" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Getting Started with ROS 2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ros2/nav2.html" class="md-nav__link">
      Navigation 2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Using Github Actions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using Github Actions" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Using Github Actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/GithubSetupCI.html" class="md-nav__link">
      Continuous Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/GithubSetupCD.html" class="md-nav__link">
      Continuous Delivery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/GithubSetupCS_Windows.html" class="md-nav__link">
      Continuous Simulation (Windows)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/GithubSetupCS_Linux.html" class="md-nav__link">
      Continuous Simulation (Linux)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/GithubSetupCS_Windows_Nav2.html" class="md-nav__link">
      Continuous Simulation for Navigation2 System Tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Using Azure Pipelines
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using Azure Pipelines" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Using Azure Pipelines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/AzureSetupCI.html" class="md-nav__link">
      Continuous Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/AzureSetupCD.html" class="md-nav__link">
      Continuous Delivery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/AzureSetupCS_Windows.html" class="md-nav__link">
      Continuous Simulation (Windows)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/AzureSetupCS_Linux.html" class="md-nav__link">
      Continuous Simulation (Linux)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ros2/system_tests.html" class="md-nav__link">
      Continuous Simulation for Navigation2 System Tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" checked>
    
    <label class="md-nav__link" for="nav-10">
      Porting Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Porting Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Porting Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/UsingROSonWindows.html" class="md-nav__link">
      Consuming a ROS Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/PortingANode.html" class="md-nav__link">
      Porting a ROS Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/UsingVCPKG.html" class="md-nav__link">
      Using a C++ Dependency
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/AddingVCPKG.html" class="md-nav__link">
      Porting a C++ Dependency
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Porting Cookbook
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="Cookbook.html" class="md-nav__link md-nav__link--active">
      Porting Cookbook
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#windows-and-linux-differences" class="md-nav__link">
    Windows and Linux Differences
  </a>
  
    <nav class="md-nav" aria-label="Windows and Linux Differences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-separators" class="md-nav__link">
    Directory Separators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-directory" class="md-nav__link">
    User directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quote-handling-in-command-window" class="md-nav__link">
    Quote handling in command window
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paths-and-ros-commands" class="md-nav__link">
    Paths and ROS commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cc-general" class="md-nav__link">
    C\C++ General
  </a>
  
    <nav class="md-nav" aria-label="C\C++ General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#symbol-visibility" class="md-nav__link">
    Symbol Visibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-library-targets-given-no-destination" class="md-nav__link">
    install Library TARGETS given no DESTINATION!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all-warnings" class="md-nav__link">
    All Warnings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-warnings" class="md-nav__link">
    Security Warnings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-standard-version" class="md-nav__link">
    C++ Standard Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-compiler-extension-__attribute__" class="md-nav__link">
    GNU Compiler Extension __attribute__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-lnk2019-unresolved-external-symbol" class="md-nav__link">
    Error LNK2019: Unresolved External Symbol
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beware-of-aggressive-optimization" class="md-nav__link">
    Beware of aggressive optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    Case sensitivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-c2065-m_pi-undeclared-identifier" class="md-nav__link">
    Error C2065 'M_PI': undeclared identifier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-c2059-syntax-error-constant-windowsh-included-before-conflicting-dependency" class="md-nav__link">
    Error C2059: syntax error: 'constant' (windows.h included before conflicting dependency)
  </a>
  
    <nav class="md-nav" aria-label="Error C2059: syntax error: 'constant' (windows.h included before conflicting dependency)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cause" class="md-nav__link">
    Cause:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix" class="md-nav__link">
    Fix:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cc-warnings" class="md-nav__link">
    C\C++ Warnings
  </a>
  
    <nav class="md-nav" aria-label="C\C++ Warnings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiler-warning-level-1-c4305-truncation" class="md-nav__link">
    Compiler Warning (level 1) C4305 - Truncation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiler-warning-level-4-c4100-unreferenced-formal-parameter" class="md-nav__link">
    Compiler Warning (level 4) C4100 - Unreferenced formal parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    Python
  </a>
  
    <nav class="md-nav" aria-label="Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shebang" class="md-nav__link">
    Shebang
  </a>
  
    <nav class="md-nav" aria-label="Shebang">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shebang-in-ros-nodes" class="md-nav__link">
    Shebang in ROS nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shebang-in-command-line-commands" class="md-nav__link">
    Shebang in command line commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-general" class="md-nav__link">
    CMake General
  </a>
  
    <nav class="md-nav" aria-label="CMake General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gtest-notfound" class="md-nav__link">
    gtest-NOTFOUND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake_c_compiler-or-cmake_cxx_compiler-error" class="md-nav__link">
    CMAKE_C_COMPILER or CMAKE_CXX_COMPILER error
  </a>
  
    <nav class="md-nav" aria-label="CMAKE_C_COMPILER or CMAKE_CXX_COMPILER error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cause_1" class="md-nav__link">
    Cause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix_1" class="md-nav__link">
    Fix
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake-tip-verbose-output" class="md-nav__link">
    CMake Tip - verbose output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-ros-on-boot" class="md-nav__link">
    Start ROS on Boot
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      ROS at Microsoft
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="ROS at Microsoft" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        ROS at Microsoft
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ROSAtMS/AzureVM.html" class="md-nav__link">
      Azure VM with ROS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ROSAtMS/WinML.html" class="md-nav__link">
      Windows ML ROS Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/microsoft/azure_kinect_ros_driver" class="md-nav__link">
      Azure Kinect ROS Node 🔗
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/microsoft/ros_azure_iothub" class="md-nav__link">
      Azure IoT Hub Node 🔗
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://aka.ms/ros/vscode" class="md-nav__link">
      Visual Studio Code ROS Extension 🔗
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Advanced
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Build/source.html" class="md-nav__link">
      Source Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Advanced/Performance.html" class="md-nav__link">
      Optimizing Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/ms-iot/msix_ros" class="md-nav__link">
      ROS on MSIX Packaging 🔗
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Support
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Support" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        <span class="md-nav__icon md-icon"></span>
        Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../GettingStarted/Troubleshooting.html" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/ms-iot/rosonwindows/issues" class="md-nav__link">
      Create Issue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://aka.ms/ros/support" class="md-nav__link">
      Paid Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#windows-and-linux-differences" class="md-nav__link">
    Windows and Linux Differences
  </a>
  
    <nav class="md-nav" aria-label="Windows and Linux Differences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-separators" class="md-nav__link">
    Directory Separators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-directory" class="md-nav__link">
    User directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quote-handling-in-command-window" class="md-nav__link">
    Quote handling in command window
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paths-and-ros-commands" class="md-nav__link">
    Paths and ROS commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cc-general" class="md-nav__link">
    C\C++ General
  </a>
  
    <nav class="md-nav" aria-label="C\C++ General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#symbol-visibility" class="md-nav__link">
    Symbol Visibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-library-targets-given-no-destination" class="md-nav__link">
    install Library TARGETS given no DESTINATION!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all-warnings" class="md-nav__link">
    All Warnings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-warnings" class="md-nav__link">
    Security Warnings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-standard-version" class="md-nav__link">
    C++ Standard Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-compiler-extension-__attribute__" class="md-nav__link">
    GNU Compiler Extension __attribute__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-lnk2019-unresolved-external-symbol" class="md-nav__link">
    Error LNK2019: Unresolved External Symbol
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beware-of-aggressive-optimization" class="md-nav__link">
    Beware of aggressive optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    Case sensitivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-c2065-m_pi-undeclared-identifier" class="md-nav__link">
    Error C2065 'M_PI': undeclared identifier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-c2059-syntax-error-constant-windowsh-included-before-conflicting-dependency" class="md-nav__link">
    Error C2059: syntax error: 'constant' (windows.h included before conflicting dependency)
  </a>
  
    <nav class="md-nav" aria-label="Error C2059: syntax error: 'constant' (windows.h included before conflicting dependency)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cause" class="md-nav__link">
    Cause:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix" class="md-nav__link">
    Fix:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cc-warnings" class="md-nav__link">
    C\C++ Warnings
  </a>
  
    <nav class="md-nav" aria-label="C\C++ Warnings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiler-warning-level-1-c4305-truncation" class="md-nav__link">
    Compiler Warning (level 1) C4305 - Truncation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiler-warning-level-4-c4100-unreferenced-formal-parameter" class="md-nav__link">
    Compiler Warning (level 4) C4100 - Unreferenced formal parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    Python
  </a>
  
    <nav class="md-nav" aria-label="Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shebang" class="md-nav__link">
    Shebang
  </a>
  
    <nav class="md-nav" aria-label="Shebang">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shebang-in-ros-nodes" class="md-nav__link">
    Shebang in ROS nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shebang-in-command-line-commands" class="md-nav__link">
    Shebang in command line commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-general" class="md-nav__link">
    CMake General
  </a>
  
    <nav class="md-nav" aria-label="CMake General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gtest-notfound" class="md-nav__link">
    gtest-NOTFOUND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake_c_compiler-or-cmake_cxx_compiler-error" class="md-nav__link">
    CMAKE_C_COMPILER or CMAKE_CXX_COMPILER error
  </a>
  
    <nav class="md-nav" aria-label="CMAKE_C_COMPILER or CMAKE_CXX_COMPILER error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cause_1" class="md-nav__link">
    Cause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix_1" class="md-nav__link">
    Fix
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake-tip-verbose-output" class="md-nav__link">
    CMake Tip - verbose output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-ros-on-boot" class="md-nav__link">
    Start ROS on Boot
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ms-iot/rosonwindows/edit/master/docs/Porting/Cookbook.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="ros-for-windows-porting-cookbook">ROS for Windows Porting Cookbook</h1>
<p>While every effort has been made to reduce the effort needed to support ROS nodes on Windows, 
there will inevitably be required changes between platforms. This cookbook is intended to collect common issues and recommended solutions.</p>
<h2 id="windows-and-linux-differences">Windows and Linux Differences</h2>
<h3 id="directory-separators">Directory Separators</h3>
<p>Windows uses backslash <code>\</code> whereas Linux uses forward slash <code>/</code>. As we encounter path processing, we've been replacing them with the Python or Boost equivalents.</p>
<h3 id="user-directory">User directory</h3>
<p>Linux has a neat shortcut for refering to the users' home directory <code>~</code>. </p>
<p>Windows uses the environment variable <code>%USERPROFILE%</code> - use this whenever you see <code>~</code> in ROS documentation.</p>
<h3 id="quote-handling-in-command-window">Quote handling in command window</h3>
<p>Cmd.exe is the command processor of command window.  Single quotes are not used at all by the cmd.exe except in batch file to enclose the command to run within a FOR /F statement.  Cmd.exe handles quoting with double quotes.  This is different from Linux that uses single quote as quote character.  As encounter quoting on Windows, please use double quote.  The following example shows using double quotes around the message contents:
<div class="highlight"><pre><span></span><code>rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- <span class="s2">&quot;[2.0, 0.0, 0.0]&quot;</span> <span class="s2">&quot;[0.0, 0.0, 1.8]&quot;</span>
</code></pre></div></p>
<h3 id="paths-and-ros-commands">Paths and ROS commands</h3>
<p>Many ROS Commands are sensitive to the drive letter they are executed from. This manifests in problems such as rosdeps not resolving correctly. </p>
<p>To address this either:</p>
<ul>
<li>Put all of your ROS workspaces on the C:\ drive</li>
<li>Link folders from your C:\ drive to your workspaces.</li>
</ul>
<p>To link a folder on Windows, use the mklink to create a filesystem link from one drive to another:
<div class="highlight"><pre><span></span><code><span class="k">mkdir</span> d:\workspaces
<span class="k">mklink</span> c:\workspaces d:\workspaces
</code></pre></div></p>
<h2 id="cc-general">C\C++ General</h2>
<h3 id="symbol-visibility">Symbol Visibility</h3>
<p>Windows and Linux handle symbol visibility differently. You may encounter a build error of the form:
<div class="highlight"><pre><span></span><code>error C2448: &#39;__attribute__&#39;: function-style initializer appears to be a function definition
&#39;visibility&#39;: identifier not found
</code></pre></div></p>
<p><a href="https://gcc.gnu.org/wiki/Visibility">The GCC visibility documentation</a>&nearr; has a good article on handling the compiler differences. This includes adding a header file which uses a compiler switch to select the correct visibility macro handler.</p>
<p>Symbol Visibility also impacts binary loading. If you are finding a Nodelet that does not run or a Qt Visualizer isn't working, it may be that the hosting process can not find an expected binary export. To diagnose this on Windows, the Windows developer tools includes a program called Gflags to enable various options. One of those options is called <em>Loader Snaps</em> which enables you to detect load failures while debugging.</p>
<p>Please visit the Microsoft Documentation for more information on <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/setting-and-clearing-image-file-flags">Gflags</a> and  <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/show-loader-snaps">Loaders snaps</a>.</p>
<h3 id="install-library-targets-given-no-destination">install Library TARGETS given no DESTINATION!</h3>
<p>Windows will generate separate archives and libraries. To handle this, add an ARCHIVE destination:
<div class="highlight"><pre><span></span><code><span class="nb">install</span><span class="p">(</span>
    <span class="s">TARGETS</span> <span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
    <span class="s">ARCHIVE</span> <span class="s">DESTINATION</span> <span class="o">${</span><span class="nv">CATKIN_PACKAGE_LIB_DESTINATION</span><span class="o">}</span>
    <span class="s">LIBRARY</span> <span class="s">DESTINATION</span> <span class="o">${</span><span class="nv">CATKIN_PACKAGE_LIB_DESTINATION</span><span class="o">}</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="all-warnings">All Warnings</h3>
<p>Warnings are good. The options for selecting warning level are different. If you add specific compiler options for warnings, please add an MSVC selection. For the Visual Studio compiler, you'll use <code>/W3</code> for warning level 3 (or <code>/W4</code> which offers more warning options). If you would like to treat warnings as errors pass <code>/WX</code>. However, these warnings would need to be corrected before the compile will succeed.</p>
<div class="highlight"><pre><span></span><code><span class="nb">if</span><span class="p">(</span><span class="s">MSVC</span><span class="p">)</span>
  <span class="nb">add_compile_options</span><span class="p">(</span><span class="s">/W3</span> <span class="s">/WX</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">add_compile_options</span><span class="p">(</span><span class="s">-Wall</span> <span class="s">-Wextra</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</code></pre></div>
<p>You can disable specific warnings using <code>#pragma</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifdef _MSC_VER</span>
  <span class="cp">#pragma warning(disable: 4244)</span>
  <span class="cp">#pragma warning(disable: 4661)</span>
<span class="cp">#endif</span>
</code></pre></div>
<h3 id="security-warnings">Security Warnings</h3>
<p>Windows deprecates certain C APIs because they are inherently insecure. You will receive a message of the form:</p>
<div class="highlight"><pre><span></span><code>warning C4996: &#39;xxx&#39;: This function or variable may be unsafe. Consider using xxx_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
</code></pre></div>
<p>Consider using modern equivalents. If you cannot use a modern equivalents, you can add the following to your cmake files:</p>
<div class="highlight"><pre><span></span><code><span class="nb">add_definitions</span><span class="p">(</span><span class="s2">&quot;/D_CRT_SECURE_NO_WARNINGS&quot;</span><span class="p">)</span>
<span class="nb">add_definitions</span><span class="p">(</span><span class="s2">&quot;/D_SILENCE_ALL_CXX17_DEPRECATION_WARNINGS&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="c-standard-version">C++ Standard Version</h3>
<p>Use CMake to set the C++ version:</p>
<div class="highlight"><pre><span></span><code><span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">CMAKE_CXX_STANDARD</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span> <span class="s">14</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>NOTE: Boost 1.66 in the Melodic requires CMAKE_CXX_STANDARD 11</p>
</blockquote>
<h3 id="gnu-compiler-extension-__attribute__">GNU Compiler Extension <code>__attribute__</code></h3>
<p><code>__attribute__</code> is not supported with Microsoft compilers. You can use a macro replacement or use a cross platform convention.</p>
<h3 id="error-lnk2019-unresolved-external-symbol">Error LNK2019: Unresolved External Symbol</h3>
<p>Linux automatically exports symbols. Windows, symbols are private by default. <a href="https://cmake.org/cmake/help/v3.4/prop_tgt/WINDOWS_EXPORT_ALL_SYMBOLS.html">CMake provides a facility for this</a>.</p>
<p>In your cmake:</p>
<div class="highlight"><pre><span></span><code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS</span> <span class="s">ON</span><span class="p">)</span>
</code></pre></div>
<p>However, you may encounter a problem with static class members, i.e. global data symbols, as discussed <a href="https://blog.kitware.com/create-dlls-on-windows-without-declspec-using-new-cmake-export-all-feature/">here</a>. In this case you need to manually handle visibility of the static class members, using the <a href="https://cmake.org/cmake/help/v3.4/module/GenerateExportHeader.html"><code>GenerateExportHeader</code></a> CMake module. </p>
<p>In particular, if your static class members are contained in a library called <code>mylibrary</code>, you need to add the following lines in your CMake after the call to
<code>add_library(mylibrary ...)</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">include</span><span class="p">(</span><span class="s">GenerateExportHeader</span><span class="p">)</span>
<span class="nb">generate_export_header</span><span class="p">(</span><span class="s">mylibrary</span><span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="s">mylibrary</span> <span class="s">PRIVATE</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="p">)</span>
</code></pre></div>
<p>The <code>generate_export_header(mylibrary)</code> call creates a file called <code>mylibrary_export.h</code>, contained in the <code>${CMAKE_CURRENT_BINARY_DIR}</code> build directory. This file contains the definition of the <code>mylibrary_EXPORT</code> macro, that you can use to modify your code as in the following: </p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;mylibrary_export.h&quot;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">myclass</span>
<span class="p">{</span>
 <span class="k">static</span> <span class="n">MYLIBRARY_EXPORT</span> <span class="kt">int</span> <span class="n">GlobalCounter</span><span class="p">;</span>
</code></pre></div>
<p>If this class definition is contained in a public header, you need to make sure to install the generated 
<code>mylibrary_export.h</code> together with the rest of the headers, i.e. : </p>
<div class="highlight"><pre><span></span><code><span class="nb">install</span><span class="p">(</span><span class="s">FILES</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/mylibrary_export.h</span>
        <span class="s">DESTINATION</span> <span class="o">${</span><span class="nv">CATKIN_PACKAGE_INCLUDE_DESTINATION</span><span class="o">}</span><span class="p">)</span>
</code></pre></div>
<h3 id="beware-of-aggressive-optimization">Beware of aggressive optimization</h3>
<p>The Microsoft compiler will optimize aggressively. This can manifest in strange ways. One instance was in TurtleBot3 fake code, is a ROS_ASSERT with a function that only returns true. Nothing else executed.</p>
<h3 id="case-sensitivity">Case sensitivity</h3>
<p>Linux is case sensitive, whereas Windows is not. We are trying to locate case sensitive areas and isolate them. This manifests in odd errors like this: </p>
<div class="highlight"><pre><span></span><code>RLException: multiple files named [turtlebot3_robot.launch] in package [turtlebot3_bringup]:
- C:\ws\turtlebot_ws\install\share\turtlebot3_bringup\launch\turtlebot3_robot.launch
- c:\ws\turtlebot_ws\install\share\turtlebot3_bringup\launch\turtlebot3_robot.launch
</code></pre></div>
<p>In this case, the <code>ROS_PACKAGE_PATH</code> has a lower case drive letter.</p>
<h3 id="error-c2065-m_pi-undeclared-identifier">Error C2065 'M_PI': undeclared identifier</h3>
<p>Add the following to the top of your file:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define _USE_MATH_DEFINES</span>
</code></pre></div>
<p>or define it in the <code>CMakeLists.txt</code>.</p>
<h3 id="error-c2059-syntax-error-constant-windowsh-included-before-conflicting-dependency">Error C2059: syntax error: 'constant' (windows.h included before conflicting dependency)</h3>
<h4 id="cause">Cause:</h4>
<p><code>Windows.h</code> defines some macros which may conflict with variables defined in ROS packages. This causes build breaks if <code>windows.h</code> is included before a conflicting dependency.</p>
<p>The error for this may be misleading as it may not identify the specific re-declaration as the issue.</p>
<h4 id="example">Example:</h4>
<p>C:\ws_moveit\src\moveit_tutorials\doc\perception_pipeline\src\cylinder_segment.cpp</p>
<p>In this file in the <strong>MoveIt</strong> tutorials, a file which included the <code>window.h</code> header (pcl) was included before a file which included (marker.h via planning_scene_interface.h).
This is problematic because marker.h defines <code>DELETE</code> as an enum member while <code>DELETE</code> is also defined as a macro in <code>windows.h</code>.</p>
<p>In this case the build error was:</p>
<div class="highlight"><pre><span></span><code>C:\opt\ros\melodic\x64\include\visualization_msgs/Marker.h(132): error C2059: syntax error: &#39;constant&#39;
</code></pre></div>
<h4 id="fix">Fix:</h4>
<p>Include any headers which define the conflicting variable (i.e. <code>DELETE</code>) above/before any headers which include <code>windows.h</code>.</p>
<h2 id="cc-warnings">C\C++ Warnings</h2>
<p>The Microsoft Visual Studio compiler has strict type checking enabled by default. Here are some common warnings.</p>
<h3 id="compiler-warning-level-1-c4305-truncation">Compiler Warning (level 1) C4305 - Truncation</h3>
<p>Use appropriate casts ensuring accuracy of the conversion.</p>
<p>See <a href="https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4305?view=vs-2019">here</a> for more details.</p>
<h3 id="compiler-warning-level-4-c4100-unreferenced-formal-parameter">Compiler Warning (level 4) C4100 - Unreferenced formal parameter</h3>
<p>Either remove the variable, or reference it in a noop block.</p>
<div class="highlight"><pre><span></span><code><span class="kt">uint8_t</span> <span class="n">unused</span><span class="p">;</span>
<span class="n">unused</span><span class="p">;</span>
</code></pre></div>
<p>See <a href="https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-4-c4100?view=vs-2019">here</a> for more details.</p>
<h2 id="python">Python</h2>
<h3 id="shebang">Shebang</h3>
<p>Windows does not support Shebang character sequence for automatically launching an interpreter. To support Python nodes on Windows, a few changes need to be made.</p>
<h4 id="shebang-in-ros-nodes">Shebang in ROS nodes</h4>
<p>If a ROS node uses Python, please rename the file with the <code>.py</code> extension.</p>
<h4 id="shebang-in-command-line-commands">Shebang in command line commands</h4>
<p>If you are producing a command line application which will be installed with Pip, please add a windows wrapper.</p>
<h2 id="cmake-general">CMake General</h2>
<h3 id="gtest-notfound">gtest-NOTFOUND</h3>
<p>This occurs when linking against <code>gtest</code> instead of <code>${GTEST_LIBRARIES}</code>.</p>
<div class="highlight"><pre><span></span><code>  <span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">rtest</span>
      <span class="o">${</span><span class="nv">GTEST_LIBRARIES</span><span class="o">}</span>
      <span class="o">${</span><span class="nv">catkin_LIBRARIES</span><span class="o">}</span>
  <span class="p">)</span>
</code></pre></div>
<h3 id="cmake_c_compiler-or-cmake_cxx_compiler-error">CMAKE_C_COMPILER or CMAKE_CXX_COMPILER error</h3>
<p>When Visual Studio upgrades, it changes the path to the compilers. If you have previously built a ROS workspace, you'll see an error like this:</p>
<div class="highlight"><pre><span></span><code>CMake Error in CMakeLists.txt:
  The CMAKE_CXX_COMPILER:

    C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.22.27905/bin/Hostx64/x64/cl.exe
</code></pre></div>
<h4 id="cause_1">Cause</h4>
<p>This is caused by a stale CMake cache.</p>
<h4 id="fix_1">Fix</h4>
<p>Remove the build, devel and install directories and rebuild.</p>
<h3 id="cmake-tip-verbose-output">CMake Tip - verbose output</h3>
<p>When debugging a build failure, it is sometimes helpful to have verbose logging enabled:</p>
<div class="highlight"><pre><span></span><code>catkin_make -DCMAKE_VERBOSE_MAKEFILE=ON
</code></pre></div>
<h2 id="start-ros-on-boot">Start ROS on Boot</h2>
<p>Once you are done developing your robot and want it to automatically start on boot, you'll want to use the <a href="https://docs.microsoft.com/en-us/windows/win32/taskschd">Windows Task Scheduler</a> to start the task.</p>
<ul>
<li>
<p>Create a Windows command file, which includes the ROS environment and Install environment,
<code>c:\catkin_ws\start_ros.bat</code>
<div class="highlight"><pre><span></span><code><span class="k">call</span> c:\opt\ros\melodic\x64\setup.bat
<span class="k">call</span> c:\catkin_ws\install\setup.bat
roslaunch <span class="p">&lt;</span>package<span class="p">&gt;</span> &lt;launch file&gt;
</code></pre></div></p>
</li>
<li>
<p>Use the command <a href="https://docs.microsoft.com/en-us/windows/win32/taskschd/schtasks">Schtasks</a>, to add a task which calls this script:
<div class="highlight"><pre><span></span><code>schtasks /Create /RU <span class="p">&lt;</span>User<span class="p">&gt;</span> /RP <span class="p">&lt;</span>password<span class="p">&gt;</span> /SC ONLOGON /TN ROS /TR <span class="s2">&quot;c:\catkin_ws\start_ros.bat&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>Enable Windows Auto logon
Use the <a href="https://support.microsoft.com/en-us/help/324737/how-to-turn-on-automatic-logon-in-windows">Autologon documentation at Microsoft's Support website</a> to conigure autologon.</p>
</li>
</ul>
<p>Alternatively use the <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/autologon">Autologon Sysinternals tool</a> to configure autologon from the command line.</p>
<p>The next time the system starts, the ROS task will run.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../GettingStarted/AddingVCPKG.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Porting a C++ Dependency
              </div>
            </div>
          </a>
        
        
          <a href="../ROSAtMS/AzureVM.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Azure VM with ROS
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.77e55a48.min.js"></script>
      <script src="../assets/javascripts/bundle.9554a270.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>