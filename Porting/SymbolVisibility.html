
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Symbol Visibility - ROS on Windows</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#symbol-visibility-in-ros-on-windows" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ROS on Windows" class="md-header__button md-logo" aria-label="ROS on Windows" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS on Windows
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Symbol Visibility
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ROS on Windows" class="md-nav__button md-logo" aria-label="ROS on Windows" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ROS on Windows
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../WhatsNew.html" class="md-nav__link">
        What's New
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Build/status.html" class="md-nav__link">
        Build Status
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Get ROS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Get ROS" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Get ROS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/Setup.html" class="md-nav__link">
        ROS 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/SetupRos2.html" class="md-nav__link">
        ROS 2
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Using ROS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Using ROS" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Using ROS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/NewToROS.html" class="md-nav__link">
        For new ROS Users
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Getting Started with ROS 1
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started with ROS 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Getting Started with ROS 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="http://wiki.ros.org/ROS/Tutorials" class="md-nav__link">
        Tutorials at ROS Wiki 🔗
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Moveit/moveit_tutorials.html" class="md-nav__link">
        MoveIt
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Moveit/UR3.html" class="md-nav__link">
        Universal Robot UR3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Turtlebot/Turtlebot3.html" class="md-nav__link">
        TurtleBot3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/sick_s300/getting_started.html" class="md-nav__link">
        SICK S300
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/ethercat/soem.html" class="md-nav__link">
        Simple Open EtherCAT Master
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/peak/peak.html" class="md-nav__link">
        PEAK-System&reg; PCAN&reg;-Basic
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Getting Started with ROS 2
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started with ROS 2" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Getting Started with ROS 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ros2/nav2.html" class="md-nav__link">
        Navigation 2
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Using Github Actions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Using Github Actions" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Using Github Actions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/GithubSetupCI.html" class="md-nav__link">
        Continuous Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/GithubSetupCD.html" class="md-nav__link">
        Continuous Delivery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/GithubSetupCS_Windows.html" class="md-nav__link">
        Continuous Simulation (Windows)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/GithubSetupCS_Linux.html" class="md-nav__link">
        Continuous Simulation (Linux)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/GithubSetupCS_Windows_Nav2.html" class="md-nav__link">
        Continuous Simulation for Navigation2 System Tests
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Using Azure Pipelines
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Using Azure Pipelines" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Using Azure Pipelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/AzureSetupCI.html" class="md-nav__link">
        Continuous Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/AzureSetupCD.html" class="md-nav__link">
        Continuous Delivery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/AzureSetupCS_Windows.html" class="md-nav__link">
        Continuous Simulation (Windows)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/AzureSetupCS_Linux.html" class="md-nav__link">
        Continuous Simulation (Linux)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ros2/system_tests.html" class="md-nav__link">
        Continuous Simulation for Navigation2 System Tests
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      <label class="md-nav__link" for="__nav_10">
        Porting Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Porting Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Porting Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/UsingROSonWindows.html" class="md-nav__link">
        Consuming a ROS Package
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/PortingANode.html" class="md-nav__link">
        Porting a ROS Package
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/UsingVCPKG.html" class="md-nav__link">
        Using a C++ Dependency
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/AddingVCPKG.html" class="md-nav__link">
        Porting a C++ Dependency
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Cookbook.html" class="md-nav__link">
        Porting Cookbook
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Symbol Visibility
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="SymbolVisibility.html" class="md-nav__link md-nav__link--active">
        Symbol Visibility
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility-control-headers" class="md-nav__link">
    Visibility Control Headers
  </a>
  
    <nav class="md-nav" aria-label="Visibility Control Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-robot-state-visibility-control-header" class="md-nav__link">
    Example: Robot State Visibility Control Header
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#windows_export_all_symbols-target-property" class="md-nav__link">
    WINDOWS_EXPORT_ALL_SYMBOLS Target Property
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        ROS at Microsoft
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ROS at Microsoft" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          ROS at Microsoft
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ROSAtMS/AzureVM.html" class="md-nav__link">
        Azure VM with ROS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ROSAtMS/WinML.html" class="md-nav__link">
        Windows ML ROS Node
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/microsoft/azure_kinect_ros_driver" class="md-nav__link">
        Azure Kinect ROS Node 🔗
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/microsoft/ros_azure_iothub" class="md-nav__link">
        Azure IoT Hub Node 🔗
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://aka.ms/ros/vscode" class="md-nav__link">
        Visual Studio Code ROS Extension 🔗
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        Advanced
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Build/source.html" class="md-nav__link">
        Source Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Advanced/Performance.html" class="md-nav__link">
        Optimizing Performance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/ms-iot/msix_ros" class="md-nav__link">
        ROS on MSIX Packaging 🔗
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        Support
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Support" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/Troubleshooting.html" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/ms-iot/rosonwindows/issues" class="md-nav__link">
        Create Issue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://aka.ms/ros/support" class="md-nav__link">
        Paid Support
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility-control-headers" class="md-nav__link">
    Visibility Control Headers
  </a>
  
    <nav class="md-nav" aria-label="Visibility Control Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-robot-state-visibility-control-header" class="md-nav__link">
    Example: Robot State Visibility Control Header
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#windows_export_all_symbols-target-property" class="md-nav__link">
    WINDOWS_EXPORT_ALL_SYMBOLS Target Property
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ms-iot/rosonwindows/edit/master/docs/Porting/SymbolVisibility.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="symbol-visibility-in-ros-on-windows">Symbol Visibility in ROS on Windows</h1>
<h2 id="background">Background</h2>
<p>The Microsoft Visual C++ Compiler (MSVC) exposes symbols from a Dynamic Link Library (DLL) only if they are explicitly exported. The clang and gcc compilers have a have an option to do the same, but it is off by default. As a result, when a library previously built on Linux is built on Windows, other libraries may be unable to resolve the external symbols.</p>
<p>Below are examples of common error messages which can be caused by symbols not being exposed:</p>
<p><div class="highlight"><pre><span></span><code>error C2448: &#39;__attribute__&#39;: function-style initializer appears to be a function definition
&#39;visibility&#39;: identifier not found
</code></pre></div>
<div class="highlight"><pre><span></span><code>CMake Error at C:/ws_ros2/install/random_numbers/share/random_numbers/cmake/ament_cmake_export_libraries-extras.cmake:48 (message):
  Package &#39;random_numbers&#39; exports the library &#39;random_numbers&#39; which
  couldn&#39;t be found
</code></pre></div></p>
<p>Symbol Visibility also impacts binary loading. If you are finding a Nodelet that does not run or a Qt Visualizer isn't working, it may be that the hosting process can not find an expected binary export. To diagnose this on Windows, the Windows developer tools includes a program called Gflags to enable various options. One of those options is called <em>Loader Snaps</em> which enables you to detect load failures while debugging.</p>
<p>Please visit the Microsoft Documentation for more information on <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/setting-and-clearing-image-file-flags">Gflags</a> and  <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/show-loader-snaps">Loaders snaps</a>.</p>
<p>Two solutions to export symbols on Windows are Visibility Control Headers and the <code>WINDOWS_EXPORT_ALL_SYMBOLS</code> property.</p>
<p>Microsoft recommends ROS developers use Visibility Control Headers to control the export of symbols from a binary. Visibility Control Headers provide more control over the symbol export macro and offer other benefits including smaller binary size and reduced link times.</p>
<h2 id="visibility-control-headers">Visibility Control Headers</h2>
<p>The purpose of Visibility Control Headers headers is to define a macro for each library which correctly declares symbols as dllimport or dllexport. This is decided based on whether the library is being consumed or being built itself. The logic in the macro also takes the compiler into account and includes logic to select the appropriate syntax.</p>
<p>The following link includes step by step instructions for adding explicit symbol visibility to a library “yielding the highest quality code with the greatest reductions in binary size, load times and link times”: <a href="https://gcc.gnu.org/wiki/Visibility">The GCC visibility documentation</a>.</p>
<p>A header named <code>visibility_control.hpp</code> can be placed in the <code>includes</code> folder for each library as shown in the example below.</p>
<h3 id="example-robot-state-visibility-control-header">Example: Robot State Visibility Control Header</h3>
<p>This example shows how a visibility control header would be added for a <code>my_lib</code> library with a class called <code>example_class</code>.
Add a visibility header to the include folder for the library. The boiler plate logic is used with the library name used in the macro to make it unique in the project. In another library, <code>MY_LIB</code> would be replaced with the library name.
<div class="highlight"><pre><span></span><code><span class="c1">// Copyright (c) 2019, Open Source Robotics Foundation, Inc.</span>
<span class="c1">// All rights reserved.</span>
<span class="c1">//</span>
<span class="c1">// Software License Agreement (BSD License 2.0)</span>
<span class="c1">//</span>
<span class="c1">// Redistribution and use in source and binary forms, with or without</span>
<span class="c1">// modification, are permitted provided that the following conditions</span>
<span class="c1">// are met:</span>
<span class="c1">//</span>
<span class="c1">//  * Redistributions of source code must retain the above copyright</span>
<span class="c1">//    notice, this list of conditions and the following disclaimer.</span>
<span class="c1">//  * Redistributions in binary form must reproduce the above</span>
<span class="c1">//    copyright notice, this list of conditions and the following</span>
<span class="c1">//    disclaimer in the documentation and/or other materials provided</span>
<span class="c1">//    with the distribution.</span>
<span class="c1">//  * Neither the name of Open Source Robotics Foundation, Inc. nor the names of its</span>
<span class="c1">//    contributors may be used to endorse or promote products derived</span>
<span class="c1">//    from this software without specific prior written permission.</span>
<span class="c1">//</span>
<span class="c1">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="c1">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="c1">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span>
<span class="c1">// FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span>
<span class="c1">// COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<span class="c1">// INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span>
<span class="c1">// BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<span class="c1">// LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<span class="c1">// CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<span class="c1">// LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span>
<span class="c1">// ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="c1">// POSSIBILITY OF SUCH DAMAGE.</span>
<span class="c1">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1">// See the License for the specific language governing permissions and</span>
<span class="c1">// limitations under the License.</span>
<span class="cp">#ifndef MY_LIB__VISIBILITY_CONTROL_HPP_</span>
<span class="cp">#define MY_LIB__VISIBILITY_CONTROL_HPP_</span>
<span class="c1">// This logic was borrowed (then namespaced) from the examples on the gcc wiki:</span>
<span class="c1">//     https://gcc.gnu.org/wiki/Visibility</span>
<span class="cp">#if defined _WIN32 || defined __CYGWIN__</span>
  <span class="cp">#ifdef __GNUC__</span>
    <span class="cp">#define MY_LIB_EXPORT __attribute__ ((dllexport))</span>
    <span class="cp">#define MY_LIB_IMPORT __attribute__ ((dllimport))</span>
  <span class="cp">#else</span>
    <span class="cp">#define MY_LIB_EXPORT __declspec(dllexport)</span>
    <span class="cp">#define MY_LIB_IMPORT __declspec(dllimport)</span>
  <span class="cp">#endif</span>
  <span class="cp">#ifdef MY_LIB_BUILDING_LIBRARY</span>
    <span class="cp">#define MY_LIB_PUBLIC MY_LIB_EXPORT</span>
  <span class="cp">#else</span>
    <span class="cp">#define MY_LIB_PUBLIC MY_LIB_IMPORT</span>
  <span class="cp">#endif</span>
  <span class="cp">#define MY_LIB_PUBLIC_TYPE MY_LIB_PUBLIC</span>
  <span class="cp">#define MY_LIB_LOCAL</span>
<span class="cp">#else</span>
  <span class="cp">#define MY_LIB_EXPORT __attribute__ ((visibility(&quot;default&quot;)))</span>
  <span class="cp">#define MY_LIB_IMPORT</span>
  <span class="cp">#if __GNUC__ &gt;= 4</span>
    <span class="cp">#define MY_LIB_PUBLIC __attribute__ ((visibility(&quot;default&quot;)))</span>
    <span class="cp">#define MY_LIB_LOCAL  __attribute__ ((visibility(&quot;hidden&quot;)))</span>
  <span class="cp">#else</span>
    <span class="cp">#define MY_LIB_PUBLIC</span>
    <span class="cp">#define MY_LIB_LOCAL</span>
  <span class="cp">#endif</span>
  <span class="cp">#define MY_LIB_PUBLIC_TYPE</span>
<span class="cp">#endif</span>
<span class="cp">#endif  </span><span class="c1">// MY_LIB__VISIBILITY_CONTROL_HPP_</span>
</code></pre></div>
To use the macro, add <code>MY_LIB_PUBLIC</code> before symbols which need to be visible to external libraries. For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">Class</span> <span class="n">MY_LIB_PUBLIC</span> <span class="n">example_class</span> <span class="p">{}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">MY_LIB_PUBLIC</span> <span class="kt">void</span> <span class="n">example_function</span> <span class="p">(){}</span>
</code></pre></div>
<h2 id="windows_export_all_symbols-target-property">WINDOWS_EXPORT_ALL_SYMBOLS Target Property</h2>
<p>CMake implements a macro which will export all symbols on Windows. The <code>WINDOWS_EXPORT_ALL_SYMBOLS</code> property causes function symbols to be automatically exported on windows. More detail of how it works can be found in the <a href="https://cmake.org/cmake/help/latest/prop_tgt/WINDOWS_EXPORT_ALL_SYMBOLS.html">WINDOWS_EXPORT_ALL_SYMBOLS CMake Documentation</a>.</p>
<p>The property can be implemented by adding the following to the CMakeLists file:
<code>set_target_properties(${LIB_NAME} PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS TRUE)</code></p>
<p>Note: if there is more than one library in a CMakeLists file you will need to call <code>set_target_properties</code> on each of them separately.</p>
<p>There is an exception to this method in the case of global data symbols. For example, a global static data member like the one below.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example_class</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">Global_data_num</span><span class="p">;</span>
<span class="err">…</span>
</code></pre></div>
<p>In these cases dllimprort/dllexport must be applied explicitly. This can be done using generate_export_header as described in the following article:
<a href="https://blog.kitware.com/create-dlls-on-windows-without-declspec-using-new-cmake-export-all-feature/">Create dlls on Windows without declspec() using new CMake export all feature</a>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Symbols must be exported on windows as there is no export by default option as with GCC and Clang. Microsoft recomends adding Visibility Control Headers which provide macros to control the export of symbols. The headers provide other benefits to binary size and linker performance, both when building with MSVC or GCC. </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="Cookbook.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Porting Cookbook
            </div>
          </div>
        </a>
      
      
        <a href="../ROSAtMS/AzureVM.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Azure VM with ROS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>